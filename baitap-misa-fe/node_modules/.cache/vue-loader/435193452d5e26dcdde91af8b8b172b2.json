{"remainingRequest":"C:\\Users\\M'penGu\\Desktop\\BaiTap.MiSa.FE\\baitap-misa-fe\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\M'penGu\\Desktop\\BaiTap.MiSa.FE\\baitap-misa-fe\\src\\views\\items\\DepartmentCombobox.vue?vue&type=style&index=0&id=d3c6ee50&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\M'penGu\\Desktop\\BaiTap.MiSa.FE\\baitap-misa-fe\\src\\views\\items\\DepartmentCombobox.vue","mtime":1630656138274},{"path":"C:\\Users\\M'penGu\\Desktop\\BaiTap.MiSa.FE\\baitap-misa-fe\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\M'penGu\\Desktop\\BaiTap.MiSa.FE\\baitap-misa-fe\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\M'penGu\\Desktop\\BaiTap.MiSa.FE\\baitap-misa-fe\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\M'penGu\\Desktop\\BaiTap.MiSa.FE\\baitap-misa-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\M'penGu\\Desktop\\BaiTap.MiSa.FE\\baitap-misa-fe\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoucm90YXRlLXNpdGU6aG92ZXIgew0KICBiYWNrZ3JvdW5kOiAjZGZkZmRmOw0KfQ0KLnJvdGF0ZS1zaXRlLmRlZy0xODAgLnJvdGF0ZSB7DQogIHRyYW5zZm9ybTogcm90YXRlKDE4MGRlZyk7DQp9DQoucm90YXRlLXNpdGUgLnJvdGF0ZSB7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgLyogYm9yZGVyOiAxcHggc29saWQgIzAwMDsgKi8NCiAgaGVpZ2h0OiAzMnB4Ow0KICB3aWR0aDogMzJweDsNCiAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgYmFja2dyb3VuZDogdXJsKCIuLi8uLi9hc3NldHMvaW1nL1Nwcml0ZXMuNjRhZjhmNjEuc3ZnIikgbm8tcmVwZWF0IC0zNjBweCAtMzUxcHg7DQp9DQouTUlTQUNvbWJvYm94IHsNCiAgaGVpZ2h0OiAzMnB4Ow0KICBib3JkZXI6IDFweCBzb2xpZCAjYmFiZWM1Ow0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQoNCi8qIC5NSVNBQ29tYm9ib3g6aG92ZXIgew0KICBib3JkZXI6IDFweCBzb2xpZCAjYmFiZWM1Ow0KfSAqLw0KLk1JU0FDb21ib2JveDpmb2N1cy13aXRoaW4gew0KICBib3JkZXI6IDFweCBzb2xpZCAjMmNhMDFjOw0KfQ0KLk1JU0FDb21ib2JveCAuZGF0YSB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAzNHB4Ow0KICBoZWlnaHQ6IDEwOw0KICBiYWNrZ3JvdW5kOiAjZmZmOw0KICB3aWR0aDogMTAwJTsNCiAgcGFkZGluZzogNHB4IDA7DQogIGJvcmRlcjogMXB4IHNvbGlkICNiYWJlYzU7DQogIC8qIGJveC1zaGFkb3c6IDFweCAxcHggIzAwMDsgKi8NCiAgYm9yZGVyLXJhZGl1czogNHB4Ow0KfQ0KLk1JU0FDb21ib2JveCAuZGF0YSB0YWJsZSB7DQogIHdpZHRoOiAxMDAlOw0KICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KfQ0KLk1JU0FDb21ib2JveCAuZGF0YSB0aGVhZCB7DQogIGJhY2tncm91bmQ6ICNmNGY1Zjg7DQp9DQoNCi5NSVNBQ29tYm9ib3ggLmRhdGEgdHIgew0KICBoZWlnaHQ6IDMycHg7DQp9DQoNCnRkLA0KdGggew0KICBwYWRkaW5nOiAwIDEwcHg7DQp9DQp0ZCB7DQogIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7DQp9DQp0ci5hY3RpdmUgew0KICBiYWNrZ3JvdW5kOiAjMmNhMDFjOw0KICBjb2xvcjogI2ZmZjsNCn0NCnRib2R5IHRyIHsNCiAgY3Vyc29yOiBwb2ludGVyOw0KfQ0KdGJvZHkgdHI6aG92ZXI6bm90KC5hY3RpdmUpIHsNCiAgY29sb3I6ICMyY2EwMWM7DQp9DQoNCi5NSVNBQ29tYm9ib3ggaW5wdXQgew0KICBib3JkZXI6IG5vbmU7DQogIG91dGxpbmU6IG5vbmU7DQogIHBhZGRpbmc6IDAgMTBweDsNCiAgd2lkdGg6IDEwMCU7DQogIGJvcmRlci1yYWRpdXM6IDJweDsNCiAgYmFja2dyb3VuZDogI2ZmZjsNCn0NCg0KLmJvcmRlci1yZWQgew0KICBib3JkZXI6IDFweCBzb2xpZCByZWQ7DQp9DQo="},{"version":3,"sources":["DepartmentCombobox.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"DepartmentCombobox.vue","sourceRoot":"src/views/items","sourcesContent":["<template>\r\n  <div class=\"MISACombobox\" :ref=\"refName\">\r\n    <div class=\"d-flex\">\r\n      <input\r\n        type=\"text\"\r\n        v-model=\"keysearch\"\r\n        class=\"h-100 align-self-c\"\r\n        :tabindex=\"tabindex\"\r\n        @blur=\"checkEmpty\"\r\n        @focus=\"removeBorder\"\r\n        :title=\"msgValidate\"\r\n      />\r\n\r\n      <div\r\n        class=\"rotate-site\"\r\n        @click=\"showAll\"\r\n        :class=\"show == true ? 'deg-180' : ''\"\r\n      >\r\n        <div class=\"rotate\"></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"data\" v-if=\"show\">\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th class=\"t-l\">Mã đơn vị</th>\r\n            <th class=\"t-l\">Tên đơn vị</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr\r\n            :class=\"current == department.departmentId ? 'active' : ''\"\r\n            @click=\"choose(index)\"\r\n            v-for=\"(department, index) in options\"\r\n            :key=\"index\"\r\n          >\r\n            <td>{{ department.departmentCode }}</td>\r\n            <td>{{ department.departmentName }}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport Common from \"../../Common\";\r\nexport default {\r\n  props: [\"value\", \"tabindex\", \"required\", \"title\", \"refName\"],\r\n  data() {\r\n    return {\r\n      show: false,\r\n      keysearch: null,\r\n      current: null,\r\n      currentName: null,\r\n      options: [],\r\n      msgValidate: \"\",\r\n    };\r\n  },\r\n  created() {},\r\n  computed: {\r\n    ...mapGetters([\"getDepartments\"]),\r\n  },\r\n  mounted() {\r\n    document.addEventListener(\"click\", this.closeData);\r\n    this.options = this.getDepartments;\r\n  },\r\n  watch: {\r\n    // giá trị departmentId thay đổi\r\n    // gán current = value\r\n    value() {\r\n      this.active(this.value);\r\n    },\r\n\r\n    keysearch() {\r\n      if (this.keysearch != this.currentName) {\r\n        this.show = true;\r\n      } else {\r\n        this.show = false;\r\n      }\r\n\r\n      if (this.keysearch == \"\" || this.keysearch == null) {\r\n        // xóa hết ô input => bỏ chọn giá trị hiện tại\r\n        // giá trị so sánh currentName gán = null\r\n        // hiển thị tất cả danh sách\r\n        this.current = null;\r\n        this.currentName = null;\r\n        this.options = this.getDepartments;\r\n      } else {\r\n        // giá trị trong ô input còn\r\n        // tìm kiếm theo tên và mã\r\n        this.options = [];\r\n        this.getDepartments.forEach((element) => {\r\n          if (\r\n            element.departmentName\r\n              .toLowerCase()\r\n              .includes(this.keysearch.toLowerCase()) ||\r\n            element.departmentCode\r\n              .toLowerCase()\r\n              .includes(this.keysearch.toLowerCase())\r\n          ) {\r\n            this.options.push(element);\r\n          }\r\n        });\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    removeBorder() {\r\n      this.$refs.departmentId.classList = \"MISACombobox\";\r\n      this.msgValidate = \"\";\r\n    },\r\n\r\n    /**\r\n     * Check empty\r\n     *Author : NguyenThang(31/8)\r\n     */\r\n    checkEmpty() {\r\n      if (!this.isValid(this.current)) {\r\n        this.$refs.departmentId.classList = \"MISACombobox border-red\";\r\n        this.msgValidate = \"Phòng ban không được để trống\";\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Show all options\r\n     *Author : NguyenThang(31/8)\r\n     */\r\n    showAll() {\r\n      // lấy lại danh sách các lựa chọn\r\n      this.options = this.getDepartments;\r\n      // đóng mở dữ liệu\r\n      this.show = !this.show;\r\n    },\r\n\r\n    /**\r\n     * Choose option\r\n     * Author : NguyenThang(31/8)\r\n     */\r\n    choose(index) {\r\n      // gán mã đơn vị\r\n      this.active(this.options[index].departmentId);\r\n      // active text lên input\r\n      this.keysearch = this.options[index].departmentName;\r\n      // gửi dữ liệu\r\n      this.$emit(\"selected\", this.current);\r\n      // xóa border-red nếu có\r\n      this.$refs.departmentId.classList = \"MISACombobox\";\r\n      this.msgValidate = \"\";\r\n    },\r\n\r\n    /**\r\n     * Active by value\r\n     *Author : NguyenThang(31/8)\r\n     */\r\n    active(id) {\r\n      this.current = this.isValid(id)\r\n        ? this.getDepartments[this.index].departmentId\r\n        : null;\r\n      if (!Common.isNullOrUndifined(this.current)) {\r\n        this.currentName = this.getDepartments[this.index].departmentName;\r\n        this.keysearch = this.getDepartments[this.index].departmentName;\r\n      } else {\r\n        this.currentName = null;\r\n        this.keysearch = null;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Check find id\r\n     *Author : NguyenThang(31/8)\r\n     */\r\n    isValid(id) {\r\n      for (let i = 0; i < this.getDepartments.length; i++) {\r\n        if (this.getDepartments[i].departmentId === id) {\r\n          this.index = i;\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n\r\n    /**-------------------------------------------------------\r\n     * Close data\r\n     * Author : NguyenThang(31/8)\r\n     */\r\n    closeData(event) {\r\n      if (!this.$el.contains(event.target)) {\r\n        // đóng data\r\n        this.show = false;\r\n        // nếu current tồn tại\r\n        // gán keysearch = tên đơn vị\r\n        // nếu current không tồn tại\r\n        // gán keysearch = null\r\n        if (this.isValid(this.current)) {\r\n          this.keysearch = this.getDepartments[this.index].departmentName;\r\n        } else {\r\n          this.keysearch = null;\r\n          this.current = null;\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.rotate-site:hover {\r\n  background: #dfdfdf;\r\n}\r\n.rotate-site.deg-180 .rotate {\r\n  transform: rotate(180deg);\r\n}\r\n.rotate-site .rotate {\r\n  cursor: pointer;\r\n  /* border: 1px solid #000; */\r\n  height: 32px;\r\n  width: 32px;\r\n  box-sizing: border-box;\r\n  background: url(\"../../assets/img/Sprites.64af8f61.svg\") no-repeat -360px -351px;\r\n}\r\n.MISACombobox {\r\n  height: 32px;\r\n  border: 1px solid #babec5;\r\n  position: relative;\r\n}\r\n\r\n/* .MISACombobox:hover {\r\n  border: 1px solid #babec5;\r\n} */\r\n.MISACombobox:focus-within {\r\n  border: 1px solid #2ca01c;\r\n}\r\n.MISACombobox .data {\r\n  position: absolute;\r\n  top: 34px;\r\n  height: 10;\r\n  background: #fff;\r\n  width: 100%;\r\n  padding: 4px 0;\r\n  border: 1px solid #babec5;\r\n  /* box-shadow: 1px 1px #000; */\r\n  border-radius: 4px;\r\n}\r\n.MISACombobox .data table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n.MISACombobox .data thead {\r\n  background: #f4f5f8;\r\n}\r\n\r\n.MISACombobox .data tr {\r\n  height: 32px;\r\n}\r\n\r\ntd,\r\nth {\r\n  padding: 0 10px;\r\n}\r\ntd {\r\n  text-transform: uppercase;\r\n}\r\ntr.active {\r\n  background: #2ca01c;\r\n  color: #fff;\r\n}\r\ntbody tr {\r\n  cursor: pointer;\r\n}\r\ntbody tr:hover:not(.active) {\r\n  color: #2ca01c;\r\n}\r\n\r\n.MISACombobox input {\r\n  border: none;\r\n  outline: none;\r\n  padding: 0 10px;\r\n  width: 100%;\r\n  border-radius: 2px;\r\n  background: #fff;\r\n}\r\n\r\n.border-red {\r\n  border: 1px solid red;\r\n}\r\n</style>"]}]}